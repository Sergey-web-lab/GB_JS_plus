(()=>{"use strict";new Vue({el:"#app",data:{goods:[],filteredGoods:[],searchLine:"",isVisibleCart:!0},methods:{isVisibleCartToggle(){0==this.isVisibleCart?this.isVisibleCart=!0:1==this.isVisibleCart&&(this.isVisibleCart=!1)},makeGETRequest(e,o){var t;window.XMLHttpRequest?t=new XMLHttpRequest:window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=function(){4===t.readyState&&o(t.responseText)},t.open("GET",e,!0),t.send()},mounted(){this.makeGETRequest(`${API_URL}/catalogData.json`,(e=>{this.goods=e,this.filteredGoods=e}))},fetchGoods(){makeGETRequest(`${API_URL}/catalogData.json`).then((e=>{this.goods=JSON.parse(e),this.filteredGoods=JSON.parse(e)}))},priceAllGoods(){let e=0;this.goods.forEach((o=>{e+=o.price})),console.log(`Стоимость всех товаров = ${e}.`)},filterGoods(e){const o=new RegExp(e,"i");this.filteredGoods=this.goods.filter((e=>o.test(e.product_name))),this.render()},render(){let e="";this.filteredGoods.forEach((o=>{const t=new GoodsItem(o.product_name,o.price);e+=t.render()})),document.querySelector(".goods-list").innerHTML=e}}});class e{constructor(e="",o=0){this.product_name=e,this.price=o}render(){return`<div\n        class="goods-item"><h3>${this.product_name}</h3><p>${this.price}</p></div>`}}const o=document.querySelector(".search-button"),t=document.querySelector(".goods-search"),s=new class{constructor(){this.goods=[],this.filteredGoods=[]}fetchGoods(e){("https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses/catalogData.json",new Promise((e=>{var o;window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLHTTP")),o.onreadystatechange=function(){4===o.readyState&&e(o.responseText)},o.open("GET","https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses/catalogData.json",!0),o.send()}))).then((o=>{this.goods=JSON.parse(o),this.filteredGoods=JSON.parse(o),e()}))}priceAllGoods(){let e=0;this.goods.forEach((o=>{e+=o.price})),console.log(`Стоимость всех товаров = ${e}.`)}filterGoods(e){const o=new RegExp(e,"i");this.filteredGoods=this.goods.filter((e=>o.test(e.product_name))),this.render()}render(){let o="";this.filteredGoods.forEach((t=>{const s=new e(t.product_name,t.price);o+=s.render()})),document.querySelector(".goods-list").innerHTML=o}};s.fetchGoods((()=>{s.render(),s.priceAllGoods()})),o.addEventListener("click",(e=>{const o=t.value;s.filterGoods(o)}));const r=new e,i=new class{constructor(){this.goods=[]}addGoodToCart(e){this.goods.push(e)}removeGoodFromCart(e){this.goods.find(e).pop()}renderGoodToCart(){{let o="";this.goods.forEach((t=>{const s=new e(t.product_name,t.price);o+=s.render()})),document.querySelector(".goods-list").innerHTML=o}}priceAllGoodsInCart(){let e=0;this.goods.forEach((o=>{e+=o.price})),console.log(`Стоимость всех товаров в корзине = ${e}.`)}};r.render(),i.renderGoodToCart(),i.priceAllGoodsInCart()})();